var BiMap;BiMap=function(){function t(t){var r,e;if(this.kv={},this.vk={},null!=t)for(r in t)e=t[r],this.push(r,e)}return t.prototype.klength=0,t.prototype.vlength=0,t.prototype.kindex=0,t.prototype.throwOnError=!1,t.prototype.push=function(t,r){return this.insert(t,r,"push")},t.prototype.appendKey=function(t,r){return this.insert(t,r,"appendKey")},t.prototype.appendVal=function(t,r){return this.insert(t,r,"appendVal")},t.prototype.set=function(t,r){return this.insert(t,r,"set")},t.prototype.type=function(t){var r;return"number"==(r=typeof t)&&t!=t?"NaN":"object"!==r?r:"[object Object]"===(r=toString.call(t))?"object":"[object Array]"===r?"array":"[object Boolean]"===r?"boolean":"[object Null]"===r?"null":void 0},t.prototype._assign=function(t,r,e,i){var s,n,h,o,p;if(null==e&&(e="push"),null==i&&(i=!1),t>this.kindex&&this.kindex++,s=i?"vk":"kv",h="vk"===s?"kv":"vk","push"===e)return null==this[s][t]&&this[h][void 0]!==t&&this[h].null!==t?(this[s][t]=r,!0):this.error(s+" mapping for "+t+" already exists");if("appendVal"===e){if(i)return null!=this.vk[t]?("array"!==this.type(this.vk[t])&&(this.vk[t]=[this.vk[t]]),this.vk[t]["array"===this.type(r)?"concat":"push"](r)):this.vk[t]=r,!0;if(null==this.kv[t]?this.kv[t]=[]:"array"!==this.type(this.kv[t])&&(this.kv[t]=[this.kv[t]]),this.kv[t]["array"===this.type(r)?"concat":"push"](r),"array"===this.type(r))for(o=0,p=r.length;o<p;o++)n=r[o],this.kv[t].push(n);return!0}return"set"===e?(this[s][t]=r,!0):void 0},t.prototype.insert=function(t,r,e){var i,s;return null==e&&(e="push"),null==t?this.error("At least one argument required by insert()"):(i=this.type(t),null==r?"array"===this.type(t)?function(){var i,s,n;for(n=[],i=0,s=t.length;i<s;i++)r=t[i],n.push(this.insert(++this.kindex-1,r,e));return n}.call(this):"object"===this.type(t)?this.traverse(t,function(t,r){return this.insert(r,t,e)}.bind(this)):this.insert(++this.kindex-1,t,e):("number"===this.type(t)&&t>this.kindex&&(this.kindex=t+1),"object"===(s=this.type(r))?this.traverse(r,function(r,i){return this.insert(t+"."+i,r,e)}.bind(this)):"array"===s?("array"===i&&this.insertArray(r,t,e,!0),this.insertArray(t,r,e)):"array"===i?this.insertArray(r,t,e,!0):!!this._assign(t,r,e)&&this._assign(r,t,e,!0)))},t.prototype.insertArray=function(t,r,e,i){var s,n,h,o;for(null==e&&(e="push"),null==i&&(i=!1),"array"!==this.type(t)&&this._assign(t,r,e,i),h=0,o=(n=function(){var n,h,o;for(o=[],n=0,h=r.length;n<h;n++)s=r[n],o.push(this._assign(s,t,e,!i));return o}.call(this)).length;h<o;h++)if(!(s=n[h]))return!1;return!0},t.prototype.traverse=function(t,r){var e,i,s,n,h;if(s=arguments[2]||"","object"===this.type(t)){h=[];for(e in t)n=t[e],i=s,s.length>0&&(i+="."),i+=e,h.push(this.traverse(n,r,i));return h}return r(t,s)},t.prototype.setNull=function(t,r){return this.kv[t]=r,this.vk[r]=t,this.kindex++,!0},t.prototype.error=function(t){if(this.throwOnError)throw new Error(t);return!1},t.prototype.removeKey=function(t){var r,e,i,s,n;if("array"===this.type(this.kv[t]))for(i=0,s=(n=this.kv[t]).length;i<s;i++)r=n[i],"array"===this.type(this.vk[r])?-1!==(e=this.vk[r].indexOf(t))&&this.vk[r].splice(e):this.vk[r]===t&&delete this.vk[r];else delete this.vk[this.kv[t]];return delete this.kv[t]},t.prototype.removeVal=function(t){var r,e,i,s,n;if("array"===this.type(this.vk[t]))for(i=0,s=(n=this.vk[t]).length;i<s;i++)r=n[i],"array"===this.type(this.kv[r])?-1!==(e=this.kv[r].indexOf(t))&&this.kv[r].splice(e):this.kv[r]===t&&delete this.kv[r];else delete this.kv[this.vk[t]];return delete this.vk[t]},t.prototype.key=function(t){return this.kv[t]},t.prototype.val=function(t){return this.vk[t]},t}(),"undefined"==typeof module||null===module||(module.exports=BiMap);